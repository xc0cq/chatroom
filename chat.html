<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>0PM</title>
    <style>
        @keyframes rainbow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        @keyframes purple-gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        @keyframes gold-gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        body {
            background: linear-gradient(135deg, #000000, #330033);
            font-family: Arial, sans-serif;
            color: white;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        header {
            background: #1a1a1a;
            padding: 15px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            user-select: none;
            border-bottom: 1px solid #444;
        }
        #messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #111111;
            box-sizing: border-box;
        }
        .message {
            margin: 5px 0;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 6px;
            word-wrap: break-word;
            white-space: pre-wrap;
        }
        #input-area {
            display: flex;
            padding: 10px;
            background: #1a1a1a;
            border-top: 1px solid #444;
            box-sizing: border-box;
        }
        #messageInput {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 6px;
            outline: none;
            font-size: 16px;
            background: #2a2a2a;
            color: white;
        }
        #sendBtn {
            margin-left: 10px;
            background: linear-gradient(90deg, #8304e0, #b367ff);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
        }
        .username-justin {
            font-weight: bold;
            background: linear-gradient(270deg, red, orange, yellow, green, blue, indigo, violet);
            background-size: 1400% 1400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: rainbow 10s ease infinite;
            display: inline-block;
        }
        .username-mason {
            font-weight: bold;
            background: linear-gradient(270deg, black, gold, black);
            background-size: 1400% 1400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gold-gradient 6s ease infinite;
            display: inline-block;
        }
        .username-guest {
            font-weight: bold;
            color: #ccc;
        }
    </style>
</head>
<body>
    <header>0PM</header>
    <div id="messages"></div>
    <div id="input-area">
        <input id="messageInput" type="text" placeholder="Type a message..." />
        <button id="sendBtn">Send</button>
    </div>

    <!-- Firebase Compat SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <script>
        // Your Firebase config (replace databaseURL with your Realtime DB URL)
        const firebaseConfig = {
            apiKey: "AIzaSyC-9Hk4TBPi4WLb4anO-84FDpIfjH8X8HY",
            authDomain: "chatting-f1958.firebaseapp.com",
            databaseURL: "https://chatting-f1958-default-rtdb.firebaseio.com",
            projectId: "chatting-f1958",
            storageBucket: "chatting-f1958.appspot.com",
            messagingSenderId: "308400029505",
            appId: "1:308400029505:web:a265599a58f1881e83abc0"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const username = localStorage.getItem("chatUser");
        if (!username) {
            window.location.href = "index.html";
        }

        const messagesRef = db.ref("messages");

        const bannedWords = [
            // Common swears + variations (simple ones)
            "fuck", "fvck", "fukk", "shit", "shyt", "bitch", "b1tch", "b!tch", "asshole", "a55hole", "a$$hole",
            "dick", "d1ck", "d!ck", "pussy", "pu55y", "p*ssy", "cock", "c0ck",
            "nigger", "n1gger", "n!gger", "nigga", "n1gga", "n!gga",
            "cunt", "c*nt",
            "fag", "f4g", "f@g",
            "motherfucker", "m0therfucker",
            "twat",
            "arse", "a55",
            "slut",
            "whore",
            // Add more if needed
        ];

        function censorMessage(text) {
            let censored = text;
            bannedWords.forEach(word => {
                const pattern = new RegExp(word, 'gi');
                censored = censored.replace(pattern, match => '#'.repeat(match.length));
            });
            return censored;
        }

        function formatUsername(name) {
            const lower = name.toLowerCase();
            if (lower === "justin") return `<span class="username-justin">${name}</span>`;
            if (lower === "mason") return `<span class="username-mason">${name}</span>`;
            if (lower === "guest") return `<span class="username-guest">${name}</span>`;
            return `<span>${name}</span>`;
        }

        function sendMessage() {
            const input = document.getElementById("messageInput");
            let text = input.value.trim();
            if (text === "") return;
            text = censorMessage(text);
            messagesRef.push({
                user: username,
                text: text
            });
            input.value = "";
        }

        messagesRef.on("child_added", snapshot => {
            const msg = snapshot.val();
            const messagesDiv = document.getElementById("messages");
            const msgDiv = document.createElement("div");
            msgDiv.classList.add("message");
            msgDiv.innerHTML = `${formatUsername(msg.user)}: ${msg.text}`;
            messagesDiv.appendChild(msgDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        });

        document.getElementById("sendBtn").addEventListener("click", sendMessage);
        document.getElementById("messageInput").addEventListener("keypress", e => {
            if (e.key === "Enter") {
                sendMessage();
            }
        });
    </script>
</body>
</html>
